# Developer documentation

## Language, frameworks, packages

The forecAstIng app is written in the C# and XAML languages, targeting the .NET, and in particular .NET MAUI, frameworks. .NET MAUI is a modern, but relatively young, superset of Xamarin.Forms that provides cross-platform tools for creating native mobile and desktop apps with a single codebase for Windows, Android, Mac, and iOS. To set up working with the source code it is necessary to follow [these steps](https://learn.microsoft.com/en-us/dotnet/maui/get-started/installation?view=net-maui-8.0&tabs=vswin) to set up .NET MAUI tools on your device, as well as install the following NuGet packages for the project:

 1. CommunityToolkit.Maui
 2. CommunityToolkit.Mvvm
 3. Microsoft.Extensions.Logging.Debug
 4. Microsoft.Maui.Controls
 5. Microsoft.Maui.Controls.Compatibility
 6. Microsoft.NET.ILLink.Tasks
 7. Newtonsoft.Json

## Architecture design, APIs, and code

This project is developed in line with the MVVM (Model-View-ViewModel) architecture design pattern, which is standard practice for .NET MAUI applications.

### Model

The Model contains objects representing time series data; there is a base TimeSeriesData class with properties representing certain abstractions common to all real instances of time series data, such as weather, and stock data that this app is concerned with, and that have their respective classes with more specific data points. The shape of WeatherData and StockData classes are informed by the APIs used to obtain historical, current, and forecast data for both. These are [Geocoding](https://geocode.maps.co/) and [Open-Meteo](https://open-meteo.com/en/docs) for weather, and [AlphaVantage](https://www.alphavantage.co/documentation/) for stock data. In addition to the skeleton that these APIs provide for the model, certain additions such as [property_name]_current in  WeatherData, and TimeSeriesDataLite class exist for more convenient manipulation in the View.

### View

The View, i.e. GUI of the application, is written almost entirely in XAML, which gets compiled down to CLR, meaning every element has a C# equivalent, however, it is standard practice, and more readable, to use it when working in .NET MAUI. Each different component (in the case of this project, the main page, details page, search popup, and settings popup) have their own .xaml file accompanied by a .xaml.cs codebehind file used almost exclusively for initializing the component in the page/popup constructor and registering the binding context (accompanying view model), if applicable. Data binding inside of the view is naturally done by the developer, but the boilerplate code for notification and event delegates and ICommands is autogenerated by the CommunityToolkit.Mvvm package using tags in the view model for e.g. button press commands or watched variables that affect the GUI such as selected tab etc.

### ViewModel

The ViewModel is a logical bridge between the Model and View, in the sense that it prepares the data for the View to consume it as agnostically as possible, and handles watching for changes in variables to notify the View. To this end, the MainPage interfaces with the ForecastsViewModel, and MorePage with the MorePageViewModel. Most core functionality is implemented inside of ForecastsViewModel, and its accompanying DataService which is responsible for communicating with data servers through the aforementioned APIs. Async functions are utilized to maintain GUI responsiveness on the main thread.

### Other files

The Resources file contains various icons used in the app, fonts, and colors and styles that aid in keeping the code more DRY since they define default styles, both light and dark themes, for all the controls in XAML files.

The Platforms file contains subfiles for all the .NET MAUI supported platforms with platform-specific launch settings and respective "Main" functions.

The MauiProgram.cs, App.xaml(.cs), and AppShell.xaml(.cs) files represent a wrap for the entire application to handle certain high-level functions such as registering and automatically constructing view <-> view model pairs, holding app-wide resources such as styles, and registering transient navigation targets (MainPage <-> MorePage..).

Additional comments and reasoning on specific choices are present in the code.
